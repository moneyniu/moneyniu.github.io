<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>苹果爱好者的碎碎念 &#8211; 苹果园</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="苹果爱好者的碎碎念">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://localhost:4000/page9/">
<meta property="og:site_name" content="苹果园">





<link rel="canonical" href="http://localhost:4000/page9/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="苹果园 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<!--<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">-->
<link href="//fonts.useso.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">


<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<!-- <script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>-->
<script src="//cdn.bootcss.com/modernizr/2.6.2/modernizr.min.js"></script>
<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">打开菜单</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000/">首页</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/avatar.png" alt="yekki photo" class="author-photo">
					<h4>yekki</h4>
					<p>苹果圈儿里中间件最厉害的，中间件圈儿里苹果技术最牛的！</p>
				</li>
				<li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">了解更多</span></a></li>
				<li>
					<a href="mailto:gary.niu@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://weibo.com/yekki"><i class="fa fa-fw fa-twitter"></i> Weibo </a>
				</li>
				
				
				
				<li>
					<a href="https://linkedin.com/in/yekki"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/yekki"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">文章</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">所有文章</a></li>
				<li><a href="http://localhost:4000/tags/">所有标签</a></li>
			</ul>
		</li>
		<li>
			<a href="#">主要项目</a>
			<ul class="dl-submenu">
				
	    			
	    			<li><a href="https://github.com/yekki/hackintosh-laptop-workbench" target="_blank">Hackintosh Laptop</a></li>
	    		
	    			
	    			<li><a href="https://github.com/yekki/packer-oracle-linux" target="_blank">Packer for Oracle Linux</a></li>
	    		
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <!--<img src="http://localhost:4000/images/abstract-12.jpg" alt="苹果爱好者的碎碎念">-->
      <img src="http://7xi68d.com1.z0.glb.clouddn.com/abstract-12.jpg" alt="苹果爱好者的碎碎念">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>苹果园</h1>
      <h2>苹果爱好者的碎碎念</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-02-06T00:00:00+08:00"><a href="http://localhost:4000/manage-multi-version-jdk-in-osx/">February 06, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About yekki">yekki</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
阅读用时 ~1 分钟
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/manage-multi-version-jdk-in-osx/" rel="bookmark" title="OSX中管理多版本JDK" itemprop="url">OSX中管理多版本JDK</a></h1>
    
  </header>
  <div class="entry-content">
    <p>由于工作中需要在多个版本中切换，手工写环境变量或改配置文件太过麻烦，因此，我特别需要一个类似于rvm（ruby多版本管理工具）的工具。昨天终于找到了这样一个工具：jEnv.</p>

<h2 id="jenv">安装 jEnv</h2>
<p>注：在安装jEnv前确保系统中已安装好<a href="http://brew.sh/index_zh-cn.html">brew</a>。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$brew</span> install jenv
<span class="nv">$brew</span> install caskroom/cask/brew-cask <span class="o">(</span>这个虽然官网上没说，但是我实验的结果是没有这个，后面添加JDK时会报错<span class="o">)</span></code></pre></figure>

<p>测试下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$jenv</span> versions
<span class="k">*</span> <span class="o">(</span><span class="nb">set </span>by /Users/gniu/.java-version<span class="o">)</span></code></pre></figure>

<p>“*“代表当前所选版本，由于系统还未安装JDK（jEnv不管理JDK安装的事儿），所以没有显示JDK信息。</p>

<h2 id="jdk">安装 JDK</h2>
<p>如果是安装最新版的JDK可以通过以下命令完成：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$brew</span> cask install java</code></pre></figure>

<p>当然，你也可以直接下载.pkg包安装。如果你需要JDK6，下载地址：<a href="http://support.apple.com/kb/DL1572">适用于 OS X 的 Java 2014-001</a></p>

<h2 id="jdk-1">注册 JDK</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$jenv</span> add /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
oracle64-1.6.0.65 added
1.6.0.65 added
1.6 added
<span class="nv">$jenv</span> add /Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home
oracle64-1.7.0.75 added
1.7.0.75 added
1.7 added
<span class="nv">$jenv</span> add /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home
oracle64-1.8.0.31 added
1.8.0.31 added
1.8 added

<span class="nv">$jenv</span> versions
<span class="k">*</span> system <span class="o">(</span><span class="nb">set </span>by /Users/gniu/.jenv/version<span class="o">)</span>
  1.6
  1.6.0.65
  1.7
  1.7.0.75
  1.8
  1.8.0.31
  oracle64-1.6.0.65
  oracle64-1.7.0.75
  oracle64-1.8.0.31</code></pre></figure>

<h2 id="jdk-2">切换JDK</h2>
<p>jEnv切换JDK可以针对某个目录来设置JDK，例如：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$jenv</span> <span class="nb">local </span>oracle64-1.6.0.65
<span class="nv">$jenv</span> version
oracle64-1.6.0.65 <span class="o">(</span><span class="nb">set </span>by /Users/gniu/Blog/yekki.github.com/.java-version<span class="o">)</span></code></pre></figure>

<p>从上面可以看出，只要你目录/Users/gniu/Blog/yekki.github.com/中，默认的JDK就是oracle64-1.6.0.65。</p>

<p>当然，你也可以全局设置，例如：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$jenv</span> global oracle64-1.6.0.65
或
<span class="nv">$jenv</span> global 1.6</code></pre></figure>

<p>但是这里需要注意：基于目录的设置会覆盖全局设置。例如：你已经将某个目录设定为oracle64-1.7.0.75，然后你又全局设定oracle64-1.6.0.65，那么在你处在那个目录中时，oracle64-1.7.0.75生效，而出了这个目录，则oracle64-1.6.0.65生效。如果你想删除对目录的JDK设置，只需删除目录中的.java-version文件。</p>

<h2 id="jdk-3">安装老版本JDK</h2>
<p>我工作中需要用到老版本的JDK，例如：jdk1.7.0_55.jdk。但是，在OSX上你只能安装jdk1.7系列的最新版，这时，你需要使用工具：Pacifist，用这个工具解开.pkg包，将其中的Contents目录取出，将其放入你手工创建的JDK目录，例如：/Library/Java/JavaVirtualMachines/jdk1.7.0_55。最后，记得更改权限，例如：”sudo chmod -R 755 /Library/Java/JavaVirtualMachines/jdk1.7.0_55”。</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-02-04T00:00:00+08:00"><a href="http://localhost:4000/how-to-manage-photo-with-icloud/">February 04, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About yekki">yekki</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
阅读用时 ~1 分钟
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/how-to-manage-photo-with-icloud/" rel="bookmark" title="苹果照片管理与数据备份" itemprop="url">苹果照片管理与数据备份</a></h1>
    
  </header>
  <div class="entry-content">
    <p>我个人苹果与黑苹果产品众多，如何有效地管理照片与数据确实是个大难题。当然，市场上充斥着各种助手与各种网盘。但是，这些产品各有各的问题，这里不一一赘述。最重要的是，玩苹果用这此外挂如同买了一苹果手机配了个地摊皮套，严重影响美感，这是真果粉儿绝对不能容忍的！本文就与大家分享下我个人的一点心得！</p>

<h2 id="section">我的照片流</h2>
<p>『我的照片流』这个概念非常搞，这也是苹果区别于其它产品的重要区别。简单来讲『我的照片流』就是一个共享区，和谁共享呢？就是使用同一个Apple ID（苹果账号）的苹果设备，例如：你有iPhone，还有iPad及Macbook Air。那么问题来了：</p>

<h3 id="section-1">如何将照片放入『我的照片流』</h3>

<p>简单来讲就是自动放与手工放，手工放需要借助软件，苹果提供的软件有：iPhoto（免费在AppStore上下）与Aperture（可以理解为iPhoto的Pro版本，收费软件），这里只介绍自动放的情况。</p>

<ul>
  <li>
    <p>iOS
打开『设置』-&gt;『iCloud』-&gt;『照片』中的『我的照片流』。打开后，你拍的照片会自动放入『我的照片流』中。
注意：只有在WIFI时才自动上传，国内网速很慢，甚至有无法访问的情况发生。</p>
  </li>
  <li>
    <p>Mac
打开『系统偏好设置』『iCloud』-&gt;『照片』-&gt;『选项』-&gt;『我的照片流』</p>
  </li>
  <li>
    <p>Aperture &amp; iPhoto
打开菜单『Aperture』中的『偏好设置』，点击『iCloud』，打开『我的照片流』</p>
  </li>
</ul>

<h3 id="section-2">图片优化</h3>
<p>由于『我的照片流』是共享区，所以，如果设备同步来的图片都是原图（一般尺寸很大），那你的设备（尤其是手机）存储空间很快就会消耗光了。所以，『我的照片流』的策略是在云上放原图，图片同步到设备时会针对设备类型优化。</p>

<h3 id="icloud">iCloud空间</h3>
<p>『我的照片流』最酷炫的就是他并不占用你的iCloud空间，即：免费的5G。但这并不意味着你就可以为所欲为，他还有两个限制：</p>

<ul>
  <li>在『我的照片流』中的照片最大存放30天（那问题来了，如果30天后是不是会把照片清除掉？这个我没试！估计不会那么残忍吧：））</li>
  <li>设备最多同步『我的照片流』上的最近1000张，这里需要注意了，如果你在手机上看『我的照片流』中的图片，实际上意味照片已经下载到你的设备中，所以，只要不超过1000张，你的手机空间够用，你愿意放多久就放多久，完全可以忽略30天那档子事儿。</li>
</ul>

<h2 id="icloud-1">iCloud照片共享</h2>
<p>搞懂了『我的照片流』，其它的就好说了。『iCloud照片共享』和『我的照片流』差不多，打开方式也差不多（参见上文），并且也不占用你的iCloud空间。用途嘛有点象微信的群聊。例如：张三妹子买了个包包想显摆下，于是在『iCloud照片共享』建个共享相册，然后再邀请各闺密（注意：这里要通过Apple ID邀请，估计就这一条就让所有萌妹子止步了：）），各闺密可以收到邀请，同意后就可以看图了，还可以在图下面写个（虚伪地）评，或也发个照片上去（PK下）。</p>

<h2 id="section-3">相机胶卷</h2>
<p>这个才是你真正的本地照片存放地，当你手iPhone拍个照时，实际上是先存放在这儿，然后再上传到『我的照片流』（如果开通的话）。由于『我的照片流』30天与1000张的限制，所以正确的做法是把你认为重要的照片从『我的照片流』存到『相机胶卷』。</p>

<h2 id="icloudbeta">iCloud照片图库Beta</h2>
<p>新版的iOS都能看到这个选项，<strong>Beta</strong> 表明了其身份是尝鲜货，还没正式发布。我认为这东西是萍果向世俗妥协的产品，这东西才是和各种网盘的对等物。如果你打开这个功能，你就会发现『我的照片流』与『相机胶卷』都没了，取而代之的是『所有照片』。这就说的很明白了，就一网盘嘛，你手机有啥就给你同步到iCloud中，当然你可以打开优化开关，即：在iCloud原原图，下载优化图。
重点来了，这东西才是真真正正吃你iCloud空间的大杀器，也就是你那可怜的5G。啥？不够用？买呗，便宜，每月6块就可以买到20G空间。但是我还是严重不推荐使用这功能！原因如下：</p>

<ul>
  <li>慢！不知道是苹果穷买不起服务器（估计中国没有数据中心）呢？还是中国政府墙威武？</li>
  <li>贵！20G每年72还贵？国内早就送到上T（萌妹子注意了：1T=1024G）了，例如：腾讯的微云盘10T。如果想用，就改用国内的云盘吧！量足！实惠！</li>
  <li>不稳定！Beta嘛，你懂的！</li>
</ul>

<p>这东东唯一的好处是，你可以登录www.icloud.com在网页上操作你的照片！开玩笑，国内哪家云盘没这个功能！</p>

<h2 id="icloud-2">iCloud云备份</h2>
<p>系统的备份一定一定要做！！不然死得会非常惨，尤其是各种商务人士！Mac的备份绝对推荐自动的TimeMachine（秒杀各种备份软件）。而iOS则是通过iTunes实现备份。备份可选：iCloud与本电脑。鉴于上面说过的原因，如果你能找到可穿墙的WIFI，iCloud是个不错的选择！如果你的iCloud 5G空间不够或网不强，还是用本电脑方式。需要注意以下两点：</p>

<ul>
  <li>备份并不包括『我的照片流』中的照片，这也是为什么建议将重要照片放入『相机胶卷』的原因</li>
  <li>建议不要多账号混用，即：多个iCloud账用一个Mac账号备份管理。你可以为每个iCloud账创建一个Mac账号，或者干脆就用iCloud账号直接登录Mac操作。</li>
</ul>

<p>先写这些吧，有时间再写续篇！</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-02-01T00:00:00+08:00"><a href="http://localhost:4000/speed-up-restart/">February 01, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About yekki">yekki</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
阅读用时 ~1 分钟
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/speed-up-restart/" rel="bookmark" title="如何加速黑苹果重启速度" itemprop="url">如何加速黑苹果重启速度</a></h1>
    
  </header>
  <div class="entry-content">
    <p>有的黑苹果重启速度特别慢（大约2、3分钟），这问题多半与Clover的『Reset Address』与『Reset Value』有关。我不知道变色龙与番茄啥的是否有对应的参数，这里只针对Clover。</p>

<p>##基础知识</p>

<p>###FACP与FADT
我看过好几台机器的ACPI表，都没有找到FADT表，后来才搞明白，原来FACP与FADT是一回事儿。FACP是签名（Signature），FADT（Fixed ACPI Description Table）是表描述名。一般获取的ACPI表文件名为FACP，编译后就会看到如下信息：</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">[000h 0000   4]Signature : "FACP"    [Fixed ACPI Description Table (FADT)]</code></pre></figure>

<h3 id="acpi">如何快速获取ACPI表文件</h3>
<p>如果你手头没有ACPI表文件，但是又想查看其中的内容，最便捷的方式就是借助<a href="https://bitbucket.org/blackosx/darwindumper/downloads">DarwinDumper</a>。这个工具能够非常方便地帮助用户获取各种信息，并且可以生成一个基于Web的图形界面帮助用户查找信息。</p>

<h2 id="section">如何修复启动速度</h2>
<p>刚才说过，这个问题和『Reset Address』与『Reset Value』参数有关，这两个参数位于Clover Configurator的Acpi部分左下方。如果什么都不填写默认值分别为：0x64与0xFE，即：重启通过PS控制器完成，PS控制器只有黑苹果才有，白苹果则是通过PCI实现，所以，如果你的电脑恰好也是通过PCI控制，那么就会有问题了。针对PCI这两个值应该填写：0x0CF9与0x06。
当然，还有一种更精确找到该值的办法，即：通过FACP表。用DarwinDumper生成ACPI表，找到FACP，搜索：<strong>Reset Register</strong>，下图标红部分即是我们要找的值：
<img src="/upload/images/facp_reset.png" alt="FACP" /></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-01-30T00:00:00+08:00"><a href="http://localhost:4000/resolve-boot-screen/">January 30, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About yekki">yekki</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
阅读用时 ~1 分钟
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/resolve-boot-screen/" rel="bookmark" title="解决启动进度条花屏问题" itemprop="url">解决启动进度条花屏问题</a></h1>
    
  </header>
  <div class="entry-content">
    <p>在升级到Yosemite后，很多电脑都会出现启动进度条花屏（仅进度条显示有问题）的问题，当然这不是什么大问题，但是对于我们这种强迫症患者来说，这是不能容忍的，因为这不完美！解决这种问题的办法有两种，一种是直接给驱动打布丁，另一种则是通过Clover补丁注入的方式来解决。作为Clover派的我，当然选择后者。</p>

<p>由于昨天Yosemite刚刚发布10.10.2，干脆就一步到位，以下内容只适合10.10.2（10.10.1不适用），步骤如下：</p>

<p>如果使用Clover Configurator（强烈推荐），则在『Kernel and Kext Patches』下的『KextsToPath』添加：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Name:IOGraphicsFamily
Find:4188C4EB11
Replace:4188C4EB31
Comment:Bootloader Graphics - Second Stage Patch</code></pre></figure>

<p>如果是直接修改config.plist，则添加：</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dict&gt;</span>
	<span class="nt">&lt;key&gt;</span>Comment<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>Bootloader Graphics - Second Stage Patch<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>Find<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;data&gt;</span>QYjE6xE=<span class="nt">&lt;/data&gt;</span>
	<span class="nt">&lt;key&gt;</span>Name<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>IOGraphicsFamily<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>Replace<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;data&gt;</span>QYjE6zE=<span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/dict&gt;</span></code></pre></figure>

<p>当然，如果你没有使用Clover，那只能通过以下方式打补丁了：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo perl -i.bak -pe <span class="s1">'s|\x41\x88\xC4\xEB\x11|\x41\x88\xC4\xEB\x31|sg'</span> /System/Library/Extensions/IOGraphicsFamily.kext/IOGraphicsFamily</code></pre></figure>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-01-27T00:00:00+08:00"><a href="http://localhost:4000/z8na-d6-performance-tuning-tips/">January 27, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About yekki">yekki</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
阅读用时 ~1 分钟
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/z8na-d6-performance-tuning-tips/" rel="bookmark" title="Z8NA-D6 主板调优实践" itemprop="url">Z8NA-D6 主板调优实践</a></h1>
    
  </header>
  <div class="entry-content">
    <p>昨天升级家里的台机到Yosemite，由于以前使用的是变色龙，所以这次采用了Clover重新安装。安装过程（参考：<a href="http://www.tonymacx86.com/yosemite-desktop-guides/144426-how-install-os-x-yosemite-using-clover.html">How to Install OS X Yosemite using Clover</a>）没什么好说的，稍微有点别扭的的是我的华硕Z8NA-D6主板不支持UEFI，所以采用BIOS兼容模式安装，有点不爽。本文重点谈下安装完Yosemite后，通过Geekbench跑分软件发现的一些问题及解决办法。</p>

<p>机台配置如下：</p>

<ul>
  <li>CPU：X5570 x 2</li>
  <li>内存：KST ECC 1600MHz 16G x 3</li>
  <li>显卡：GT610 1G</li>
  <li>硬盘：Samsung 840 12G SSD + 希捷2TB</li>
</ul>

<p>这台机器配了有段时间了，说起来当初配置有很多不合理之处。问题最大的就是内存，这主板支持ECC与non-ECC内存，所以没必要多花钱用ECC。其次，这款主板前端总线频率支持1066MHz与1333MHz，所以1600MHz根本发挥不出优势。最后，这款主板有六个内存插槽，最经济的做法是用6根8G条子，这样就可以充分享受三通道，而用3根16G虽然内存不少，但是只能到双通道。还有就是SSD偏小，想用来装多系统是不可能了，当然，这不是主要问题。由于我不做视频处理，GT610也就够用了。好在毕竟是服务器主板，还算稳定！</p>

<p>初次安装时，除了必要的显卡注入与驱动注入补丁（Trim与橘色硬盘），没有打任何DSDT补丁，也没有应用Clover DSDT补丁。结果Geekbench3跑分单核只有1000多一点，多核也就9000多！这绝对是不正常，这台机器正常跑分应该在16000以上。经过不停的试，终于找到答案，原来是上电源管理的补丁有关，用Clover Configurator在Acpi中勾选SSDT下面的”Generate P States”与”Generate CState”。重启后再跑分，总分达到了15000多！</p>

<p><img src="/upload/images/memlow.png" alt="内存跑分" /></p>

<p>虽然总分差不多，可以分析下跑分单项又发现了问题，内存跑分极不正常，单核与多核跑分一样，都在1200多分，这显然没有发挥双通道的威力。更吊诡的是，明明是48G内存，可是在系统信息中确显示64G，再细看，居然可以看到7个内存插槽，上面赫然显示有4根16GB的内存条。</p>

<p>Clover中对于内存的设置相对较少，在SMBIOS中可以设置详细的内存插槽及内存信息，但是我的理解是这只是硬件描述信息，应该不起什么作用，后来实验结果也得到了验证，所以，我觉得硬件问题的可能性大。后来尝试着将内存条移位，也就是将3根内存条全部换到其余的内存插槽，结过测试，果然有效果！虽然内存分值还是偏低（毕竟频率上不去，而且还不是三通道），但是相比以前已大大改善！跑分也上到了16500分多，这台机器曾经跑到过17000分以上，看来还是有调优空间。</p>

<p>正确的内存插接方式如图（红框标注）：</p>

<p><img src="/upload/images/z8na-d6.jpg" alt="主板" /></p>

<p>新的内存跑分：</p>

<p><img src="/upload/images/memhigh.png" alt="内存跑分" /></p>

<p>我个人对于台式机研究相对较少，当前这可机器只能勉强算是能用了，但是细节上还有很多问题需要研究，例如：显示器内建、电源管理等，等以后有时间再补上，至少也要自建DSDT/SSDT及补丁。下面附上config.plist文件及用到的驱动，驱动都是大陆货，就不附下载了。</p>

<ul>
  <li><a href="/upload/download/z8na-d6_config.plist.zip">config.plist</a></li>
  <li>AppleIntelE1000e.kext（以太网卡驱动）</li>
  <li>FakeSMC.kext（不解释）</li>
  <li>GenericUSBXHCI.kext（USB3）</li>
  <li>VoodooPS2Controller.kext（鼠标键盘）</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://localhost:4000/page8/" class="btn">上一页</a></li>
      
    

    
    
      <li><a href="http://localhost:4000">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://localhost:4000/page7/">7</a></li>
      
    
      
        
        
        
        <li><a href="http://localhost:4000/page8/">8</a></li>
      
    
      
        <li><strong class="current-page">9</strong></li>
      
    

    
    

    
      <li><a href="http://localhost:4000/page10/">10</a></li>
    

    
    
      <li><a href="http://localhost:4000/page10/" class="btn">下一页</a></li>
    
  </ul>
</div>

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 yekki. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
<script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>



          

</body>
</html>